<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图标生成器</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    
    <!-- 三栏布局 -->
    <div class="three-column-layout">
        <!-- 左侧：图标类型选择 -->
        <div class="left-column">
            <div class="icon-selection">
                <h3>图标类型</h3>
                <ul class="icon-list">
                    <li><button class="icon-btn active" data-icon="calculator" onclick="switchIconType('calculator')">🧮 计算器</button></li>
                    <li><button class="icon-btn" data-icon="mouse" onclick="switchIconType('mouse')">🖱️ 鼠标</button></li>
                    <li><button class="icon-btn" data-icon="keyboard" onclick="switchIconType('keyboard')">⌨️ 键盘</button></li>
                    <li><button class="icon-btn" data-icon="monitor" onclick="switchIconType('monitor')">🖥️ 显示器</button></li>
                    <li><button class="icon-btn" data-icon="location" onclick="switchIconType('location')">📍 位置</button></li>
                    <li><button class="icon-btn" data-icon="custom" onclick="openAIModal()">🎨 AI生成</button></li>
                </ul>
            </div>
        </div>
        
        <!-- 中间：预览区域 -->
        <div class="center-column">
            <div class="preview-container">
                <div class="preview-header">
                    <h1 id="iconTitle">🧮 计算器图标</h1>
                    <button class="settings-btn" onclick="toggleSettingsPanel()" title="底图设置">
                        <span class="settings-icon">⚙️</span>
                    </button>
                </div>
                
                <div class="canvas-container">
                    <canvas id="previewCanvas" width="256" height="256"></canvas>
                    <p class="info">预览 (256x256)</p>
                </div>
                
                <button class="generate-btn" onclick="openSizeModal()">
                    🎨 生成并下载图标
                </button>
                
                <p class="info" id="iconDescription">
                    点击按钮将生成一个1024x1024像素的计算器图标并自动下载
                </p>
            </div>
        </div>
        
        <!-- 右侧：底图设置 -->
        <div class="right-column" id="settingsPanel">
            <div class="settings-header">
                <h3>🎨 底图设置</h3>
                <button class="close-settings-btn" onclick="toggleSettingsPanel()">&times;</button>
            </div>
            <div class="settings-content">
                <div class="setting-group">
                    <label for="backgroundShape">背景形状</label>
                    <select id="backgroundShape" onchange="updateBackgroundPreview()">
                        <option value="circle">圆形</option>
                        <option value="rounded" selected>圆角矩形</option>
                        <option value="square">方形</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label for="cornerRadius">圆角大小</label>
                    <div class="range-container">
                        <input type="range" id="cornerRadius" min="0" max="50" value="40" onchange="updateBackgroundPreview()">
                        <span class="range-value" id="cornerRadiusValue">40px</span>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label for="backgroundColor">背景颜色</label>
                    <input type="color" id="backgroundColor" value="#667eea" onchange="updateBackgroundPreview()">
                </div>
                
                <div class="setting-group">
                    <label for="iconPadding">内边距</label>
                    <div class="range-container">
                        <input type="range" id="iconPadding" min="0" max="100" value="20" onchange="updateBackgroundPreview()">
                        <span class="range-value" id="iconPaddingValue">20px</span>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label for="shadowIntensity">阴影强度</label>
                    <div class="range-container">
                        <input type="range" id="shadowIntensity" min="0" max="30" value="20" onchange="updateBackgroundPreview()">
                        <span class="range-value" id="shadowIntensityValue">20px</span>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label for="borderWidth">边框宽度</label>
                    <div class="range-container">
                        <input type="range" id="borderWidth" min="0" max="10" value="0" onchange="updateBackgroundPreview()">
                        <span class="range-value" id="borderWidthValue">0px</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 尺寸选择弹窗 -->
    <div class="size-modal" id="sizeModal">
        <div class="size-modal-content">
            <div class="size-modal-header">
                <h3>📏 选择尺寸</h3>
                <button class="close-btn" onclick="closeSizeModal()">&times;</button>
            </div>
            <div class="size-options">
                <div class="download-type-tabs">
                    <button class="tab-btn active" data-type="custom">自定义尺寸</button>
                    <button class="tab-btn" data-type="ios">iOS应用图标</button>
                </div>
                
                <div class="tab-content" id="customSizeTab">
                    <div class="preset-sizes">
                        <button class="size-btn" data-size="24">24px</button>
                        <button class="size-btn" data-size="32">32px</button>
                        <button class="size-btn" data-size="64">64px</button>
                        <button class="size-btn" data-size="128">128px</button>
                        <button class="size-btn active" data-size="1024">1024px</button>
                    </div>
                    <div class="custom-size">
                        <input type="number" id="customSize" placeholder="自定义" min="16" max="2048" value="1024">
                        <span class="px-label">px</span>
                    </div>
                </div>
                
                <div class="tab-content" id="iosSizeTab" style="display: none;">
                    <div class="ios-info">
                        <p class="ios-description">📱 一键下载所有iOS应用图标尺寸，包含iPhone、iPad所需的所有规格，自动压缩为ZIP文件</p>
                    </div>
                    <div class="ios-sizes">
                        <div class="ios-category">
                            <h4>📱 iPhone 主屏幕</h4>
                            <div class="ios-size-grid">
                                <div class="ios-size-item">
                                    <span class="ios-size-name">appIcon_60@2x.png</span>
                                    <span class="ios-size-value">120×120</span>
                                </div>
                                <div class="ios-size-item">
                                    <span class="ios-size-name">appIcon_60@3x.png</span>
                                    <span class="ios-size-value">180×180</span>
                                </div>
                            </div>
                        </div>
                        <div class="ios-category">
                            <h4>⚙️ 设置 & 通知</h4>
                            <div class="ios-size-grid">
                                <div class="ios-size-item">
                                    <span class="ios-size-name">appIcon_29.png</span>
                                    <span class="ios-size-value">29×29</span>
                                </div>
                                <div class="ios-size-item">
                                    <span class="ios-size-name">appIcon_29@2x.png</span>
                                    <span class="ios-size-value">58×58</span>
                                </div>
                                <div class="ios-size-item">
                                    <span class="ios-size-name">appIcon_29@3x.png</span>
                                    <span class="ios-size-value">87×87</span>
                                </div>
                                <div class="ios-size-item">
                                    <span class="ios-size-name">appIcon_20.png</span>
                                    <span class="ios-size-value">20×20</span>
                                </div>
                                <div class="ios-size-item">
                                    <span class="ios-size-name">appIcon_20@2x.png</span>
                                    <span class="ios-size-value">40×40</span>
                                </div>
                                <div class="ios-size-item">
                                    <span class="ios-size-name">appIcon_20@3x.png</span>
                                    <span class="ios-size-value">60×60</span>
                                </div>
                            </div>
                        </div>
                        <div class="ios-category">
                            <h4>🔍 Spotlight 搜索</h4>
                            <div class="ios-size-grid">
                                <div class="ios-size-item">
                                    <span class="ios-size-name">appIcon_40.png</span>
                                    <span class="ios-size-value">40×40</span>
                                </div>
                                <div class="ios-size-item">
                                    <span class="ios-size-name">appIcon_40@2x.png</span>
                                    <span class="ios-size-value">80×80</span>
                                </div>
                                <div class="ios-size-item">
                                    <span class="ios-size-name">appIcon_40@3x.png</span>
                                    <span class="ios-size-value">120×120</span>
                                </div>
                            </div>
                        </div>
                        <div class="ios-category">
                            <h4>📱 iPad</h4>
                            <div class="ios-size-grid">
                                <div class="ios-size-item">
                                    <span class="ios-size-name">appIcon_76@2x.png</span>
                                    <span class="ios-size-value">152×152</span>
                                </div>
                                <div class="ios-size-item">
                                    <span class="ios-size-name">appIcon_83.5@2x.png</span>
                                    <span class="ios-size-value">167×167</span>
                                </div>
                            </div>
                        </div>
                        <div class="ios-category">
                            <h4>🏪 App Store</h4>
                            <div class="ios-size-grid">
                                <div class="ios-size-item">
                                    <span class="ios-size-name">appIcon_1024.png</span>
                                    <span class="ios-size-value">1024×1024</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 底图设置区域 -->
            <div class="background-settings">
                <h4>🎨 底图设置</h4>
                <div class="background-settings-grid">
                    <div class="setting-item">
                        <label for="backgroundShape">背景形状：</label>
                        <select id="backgroundShape" onchange="updateBackgroundPreview()">
                            <option value="circle">圆形</option>
                            <option value="rounded" selected>圆角矩形</option>
                            <option value="square">方形</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="cornerRadius">圆角大小：</label>
                        <input type="range" id="cornerRadius" min="0" max="50" value="40" onchange="updateBackgroundPreview()">
                        <span class="setting-hint" id="cornerRadiusValue">40px</span>
                    </div>
                    <div class="setting-item">
                        <label for="backgroundColor">背景颜色：</label>
                        <input type="color" id="backgroundColor" value="#667eea" onchange="updateBackgroundPreview()">
                    </div>
                    <div class="setting-item">
                        <label for="iconPadding">内边距：</label>
                        <input type="range" id="iconPadding" min="0" max="100" value="20" onchange="updateBackgroundPreview()">
                        <span class="setting-hint" id="iconPaddingValue">20px</span>
                    </div>
                    <div class="setting-item">
                        <label for="shadowIntensity">阴影强度：</label>
                        <input type="range" id="shadowIntensity" min="0" max="30" value="20" onchange="updateBackgroundPreview()">
                        <span class="setting-hint" id="shadowIntensityValue">20px</span>
                    </div>
                    <div class="setting-item">
                        <label for="borderWidth">边框宽度：</label>
                        <input type="range" id="borderWidth" min="0" max="10" value="0" onchange="updateBackgroundPreview()">
                        <span class="setting-hint" id="borderWidthValue">0px</span>
                    </div>
                </div>
                
                <!-- 底图预览 -->
                <div class="background-preview">
                    <h5>🔍 底图预览</h5>
                    <div class="preview-container">
                        <canvas id="backgroundPreviewCanvas" width="120" height="120"></canvas>
                        <div class="preview-info">
                            <p class="preview-text" id="backgroundPreviewText">图标预览</p>
                            <p class="preview-details" id="backgroundPreviewDetails">形状: 圆角矩形, 颜色: #667eea</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="size-info">
                <p class="current-size">当前尺寸: <span id="currentSizeDisplay">1024px</span></p>
                <p class="size-tip">💡 常用尺寸: 24px(工具栏), 32px(任务栏), 64px(桌面), 128px(应用商店), 1024px(高质量)</p>
            </div>
            <div class="modal-actions">
                <button class="cancel-btn" onclick="closeSizeModal()">取消</button>
                <button class="confirm-btn" id="confirmBtn" onclick="confirmSizeAndDownload()">确认并下载</button>
            </div>
        </div>
    </div>

    <!-- AI生成提示词弹窗 -->
    <div class="ai-modal" id="aiModal">
        <div class="ai-modal-content">
            <div class="ai-modal-header">
                <h3>🎨 AI图标生成</h3>
                <button class="close-btn" onclick="closeAIModal()">&times;</button>
            </div>
            <div class="ai-modal-body">
                <div class="ai-input-section">
                    <label for="aiPrompt">描述你想要的图标：</label>
                    <textarea id="aiPrompt" placeholder="例如：calculator icon, minimalist style, blue color, white background" rows="3" oninput="checkAndShowTextSettings(this.value); updateTextPreview()"></textarea>
                </div>
                <div class="ai-examples">
                    <p class="examples-title">💡 提示词示例：</p>
                    <div class="example-tags">
                        <span class="example-tag" onclick="setAIPrompt('calculator icon, blue')">计算器</span>
                        <span class="example-tag" onclick="setAIPrompt('music icon, purple')">音乐</span>
                        <span class="example-tag" onclick="setAIPrompt('heart icon, red')">爱心</span>
                        <span class="example-tag" onclick="setAIPrompt('star icon, yellow')">星星</span>
                        <span class="example-tag" onclick="setAIPrompt('gear icon, grey')">齿轮</span>
                        <span class="example-tag" onclick="setAIPrompt('home icon, green')">家</span>
                        <span class="example-tag" onclick="setAIPrompt('camera icon, orange')">相机</span>
                        <span class="example-tag" onclick="setAIPrompt('game icon, pink')">游戏</span>
                        <span class="example-tag" onclick="setAIPrompt('shopping icon, teal')">购物</span>
                        <span class="example-tag" onclick="setAIPrompt('weather icon, cyan')">天气</span>
                    </div>
                </div>
                <div class="ai-tips">
                    <p>💡 提示：输入图标描述，系统会根据关键词智能生成图标。支持中英文，包含颜色、类型等关键词效果更好</p>
                </div>
                
                <!-- 文字设置模块 -->
                <div class="text-settings-module">
                    <div class="module-header" onclick="toggleTextSettings()">
                        <div class="header-content">
                            <span class="module-icon">📝</span>
                            <span class="module-title">文字设置</span>
                            <span class="module-subtitle" id="textSettingsSubtitle">点击展开设置选项</span>
                        </div>
                        <div class="toggle-icon" id="textSettingsToggle">▼</div>
                    </div>
                    
                    <div class="module-content" id="textSettingsContent" style="display: none;">
                        <div class="settings-grid">
                            <div class="setting-item">
                                <label for="fontSize">字体大小：</label>
                                <select id="fontSize" onchange="handleFontSizeChange(); updateTextPreview()">
                                    <option value="small">小 (80px)</option>
                                    <option value="medium" selected>中 (100px)</option>
                                    <option value="large">大 (120px)</option>
                                    <option value="custom">自定义</option>
                                </select>
                                <input type="number" id="customFontSize" placeholder="像素" min="20" max="200" style="display: none;" onchange="updateTextPreview()">
                            </div>
                            <div class="setting-item">
                                <label for="fontFamily">字体类型：</label>
                                <select id="fontFamily" onchange="updateTextPreview()">
                                    <option value="Arial">Arial</option>
                                    <option value="Helvetica">Helvetica</option>
                                    <option value="Georgia">Georgia</option>
                                    <option value="Times New Roman">Times New Roman</option>
                                    <option value="Courier New">Courier New</option>
                                    <option value="Verdana">Verdana</option>
                                    <option value="Impact">Impact</option>
                                    <option value="Comic Sans MS">Comic Sans MS</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label for="textStyle">文字样式：</label>
                                <select id="textStyle" onchange="updateTextPreview()">
                                    <option value="normal">普通</option>
                                    <option value="bold" selected>粗体</option>
                                    <option value="italic">斜体</option>
                                    <option value="bold italic">粗斜体</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label for="maxLength">最大长度：</label>
                                <input type="number" id="maxLength" value="7" min="1" max="20" onchange="updateTextPreview()">
                                <span class="setting-hint">字符</span>
                            </div>
                            <div class="setting-item">
                                <label for="textWrap">文字换行：</label>
                                <select id="textWrap" onchange="updateTextPreview()">
                                    <option value="false">不换行</option>
                                    <option value="true">自动换行</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label for="textColor">文字颜色：</label>
                                <input type="color" id="textColor" value="#ffffff" onchange="updateTextPreview()">
                            </div>
                        </div>
                        
                        <!-- 实时预览区域 -->
                        <div class="preview-section">
                            <h5>🔍 实时预览</h5>
                            <div class="preview-container">
                                <canvas id="textPreviewCanvas" width="120" height="120"></canvas>
                                <div class="preview-info">
                                    <p class="preview-text" id="previewText">MYAPP</p>
                                    <p class="preview-details" id="previewDetails">字体: Arial, 大小: 100px, 样式: bold</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="ai-modal-actions">
                <button class="cancel-btn" onclick="closeAIModal()">取消</button>
                <button class="generate-ai-btn" onclick="generateAIIcon()" id="generateAIBtn">
                    <span class="btn-text">🎨 生成图标</span>
                    <span class="btn-loading" style="display: none;">⏳ 生成中...</span>
                </button>
            </div>
        </div>
    </div>

    <!-- 引入JavaScript文件 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/calculator-icon.js"></script>
    <script src="js/mouse-icon.js"></script>
    <script src="js/keyboard-icon.js"></script>
    <script src="js/monitor-icon.js"></script>
    <script src="js/location-icon.js"></script>
    <script src="js/main.js"></script>
</body>
</html>